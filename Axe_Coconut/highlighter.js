function t(t){const e=t.ownerDocument.defaultView;let o=t,i=o.getBoundingClientRect(),n=!1;for(;!i.height||!i.width;)n=!0,o=o.parentElement,i=o.getBoundingClientRect();const r=e.getComputedStyle(o);let a=e.frameElement,l=i,s=l.top+e.pageYOffset,h=l.left+e.pageXOffset;if(a)for(s=l.top,h=l.left;a;){const{frameElement:t,pageYOffset:e,pageXOffset:o}=a.ownerDocument.defaultView;l=a.getBoundingClientRect(),s+=l.top+e,h+=l.left+o,a=t}const p=function(t,e=window.visualViewport||{width:window.innerWidth,height:window.innerWidth}){return{top:t.top+t.height<0,bottom:t.top>e.height,left:t.left+t.width<0,right:t.left>e.width}}(e.frameElement?{top:s-window.pageYOffset,left:h-window.pageXOffset,height:i.height,width:i.width}:i),d=t=>+t.replace("px","")||0,{height:c,width:g}=e.visualViewport||{width:e.innerWidth,height:e.innerHeight};return{hidden:n,offscreen:p.top||p.bottom||p.left||p.right,offscreenTop:p.top,offscreenBottom:p.bottom,offscreenLeft:p.left,offscreenRight:p.right,fullscreen:s<=0&&h<=0&&i.width>=g&&i.height>=c,top:s,left:h,width:i.width,height:i.height,margin:{top:d(r.marginTop),right:d(r.marginRight),bottom:d(r.marginBottom),left:d(r.marginLeft)},border:{top:d(r.borderTopWidth),right:d(r.borderRightWidth),bottom:d(r.borderBottomWidth),left:d(r.borderLeftWidth)},padding:{top:d(r.paddingTop),right:d(r.paddingRight),bottom:d(r.paddingBottom),left:d(r.paddingLeft)}}}const e=new Set,o=t=>1===t.length?t[0]:t;var i={sanitize:t=>n().commons.text.sanitize(t),sanitizeContext(t){if(!t.ownerDocument||t.ownerDocument===document)return t;const e=n();e._selectorData=e.utils.getSelectorData(e.utils.getFlattenedTree());const o=[e.utils.getSelector(t)];let i=t.ownerDocument.defaultView.frameElement;for(;i;)o.unshift(e.utils.getSelector(i)),i=i.contentWindow.parent.frameElement;return o.flat()},validLangCheck(t){const e=n(),o=e.utils.getBaseLang(t);return e.utils.validLangs().includes(o)},isHidden:(...t)=>o(t.map(a)),isVisible:(...t)=>o(t.map(l)),isSRVisible:(...t)=>o(t.map(s)),name:(...t)=>o(t.map(r)),isOpaque:(...t)=>o(t.map(g)),getRoleType:(...t)=>o(t.map(h)),getRole:(...t)=>o(t.map(p)),getContrast:(...t)=>o(t.map(d)),isWidgetRole:t=>n().commons.aria.lookupTable.rolesOfType.widget.includes(t),isFocusable:(...t)=>o(t.map(m)),getTabbableElements:t=>o(function(t){const e=n(t,!0),o=c(e,t);return e.commons.dom.getTabbableElements(o).map((({actualNode:t})=>t))}(t)),getFlattenedTree(t){const e=n();return e._tree=e.utils.getFlattenedTree(t.ownerDocument),e._tree},getSource:t=>new(n().utils.DqElement)(t).source,setupTrees:function(){f(),e.clear()},cleanupTrees:f};function n(t=document.documentElement,o=!1){const i=t.ownerDocument,n=i.defaultView.axe||i.defaultView.___axeObject;if(!n)throw new ReferenceError("axe was not found in this context");const r=n._tree&&n._tree[0];return(o||!e.has(n)||r&&!n.utils.getNodeFromTree(r,t))&&(n._tree=n.utils.getFlattenedTree(i),e.add(n)),n}function r(t){const e=n(t),o=c(e,t);return o?e.commons.text.accessibleTextVirtual(o):""}function a(t){return n(t).commons.utils.isHidden(t)}function l(t){return n(t).commons.dom.isVisible(t,!1,!0)}function s(t){return n(t).commons.dom.isVisible(t,!0,!1)}function h(t){const e=n(t),o=function(t){return n(t).commons.aria.implicitRole(t)}(t),i=e.commons.aria.lookupTable.role[o];return i&&i.type}function p(t){return n(t).commons.aria.getRole(t)}function d(t){const e=n(t);let o;try{const i=e.commons.color.getForegroundColor(t),n=e.commons.color.getBackgroundColor(t);o=e.commons.color.getContrast(n,i)}catch(t){console.error(t)}return o}function c(t,e){return t._tree||(t._tree=t.utils.getFlattenedTree(e.ownerDocument)),t.utils.getNodeFromTree(t._tree[0],e)}function g(t){return n(t).commons.dom.isOpaque(t)}function m(t){return n(t).commons.dom.isFocusable(t)}function f(){e.forEach((t=>{t._tree=null,t._cache.clear()}))}const{getRole:u,getContrast:b,name:x,isHidden:w}=i;function v(t){const e=new Map;try{const o=function(t){const e=b(t);if(!e)return;return{name:"Contrast",value:`\n      <span class="contrast-aa">AA</span> ${Math.floor(100*e)/100}\n      ${e<4.5?'<svg overflow="visible" preserveAspectRatio="none" viewBox="0 0 24 24" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31A7.902 7.902 0 0112 20zm6.31-3.1L7.1 5.69A7.902 7.902 0 0112 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z" vector-effect="non-scaling-stroke" fill="#d93251"></path></svg>':'<svg overflow="visible" preserveAspectRatio="none" viewBox="0 0 24 24" width="14" height="14"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" vector-effect="non-scaling-stroke" fill="#32a852"></path></svg>'}\n    `}}(t),i=function(t){const e=u(t);if(e)return{name:"Role",value:e}}(t),n=i&&function(t){const e=x(t);return{name:"Accessible Text",value:w(t)?"<em>hidden</em>":e||"<em>empty</em>"}}(t);[o,i,n].filter(Boolean).forEach((({name:t,value:o})=>{e.set(t,o)}))}catch(t){console.error(t)}return e}const y=document.createElement("template");y.innerHTML='\n  <style>\n    :host{--high-contrast-color-outline:#c11bde;--high-contrast-color-shadow:#e267ff}.theme--high-contrast{transform:translate(-6px,-6px);padding:3px;border:3px solid var(--high-contrast-color-outline);box-shadow:0 0 10px 4px var(--high-contrast-color-shadow);max-width:calc(100% - 6px)}.theme--high-contrast.highlight--fullpage{position:fixed!important;top:0!important;bottom:0!important;left:0!important;right:0!important;transform:none;border:3px solid var(--high-contrast-color-outline)}.theme--high-contrast:not(.highlight--offscreen):not(.highlight--fullpage)+#tooltip.tooltip--bottom{transform:translateY(6px)}.theme--high-contrast:not(.highlight--offscreen):not(.highlight--fullpage)+#tooltip.tooltip--top{transform:translateY(-6px)}.theme--devtools{--theme--border-color:rgba(255,255,50,0.45);--theme--margin-color:rgba(255,150,0,0.5);--theme--padding-color:rgba(35,180,80,0.35);--theme--content-color:rgba(30,60,255,0.4)}.theme--devtools.highlight--fullpage{position:fixed!important;top:0!important;bottom:0!important;left:0!important;right:0!important;transform:none}.theme--selection:before{position:absolute;content:"";display:block;top:0;bottom:0;left:0;right:0;border:3px dashed var(--high-contrast-color-outline)}.theme--selection.highlight--page{position:fixed!important;top:0!important;bottom:0!important;left:0!important;right:0!important;transform:none;border:3px dashed var(--high-contrast-color-outline)}.theme--selection.highlight--page:before{display:none}.theme--selected:before{position:absolute;content:"";display:block;top:0;bottom:0;left:0;right:0;border:3px solid var(--high-contrast-color-outline)}.theme--selected.highlight--page{position:fixed!important;top:0!important;bottom:0!important;left:0!important;right:0!important;transform:none;border:3px solid var(--high-contrast-color-outline)}.theme--selected.highlight--page:before{display:none}:host{--tabber-color-outline:#3c7aae}.theme--tabber:before{position:absolute;content:"";display:block;top:0;bottom:0;left:0;right:0;border:3px solid var(--tabber-color-outline)}.theme--tabber:after{counter-reset:tabber var(--axe-highlight-counter);content:counter(tabber);position:absolute;top:3px;left:3px;border:3px solid #fff;color:#fff;font-weight:500;background-color:var(--tabber-color-outline);display:flex;height:1.5em;min-width:1.5em;align-items:center;justify-content:center;font-family:monospace;font-size:13px}\n    :host{--base-font-size:12px;pointer-events:none!important;position:absolute!important;top:0!important;left:0!important;height:0!important;width:100%!important}:host(.highlight--hide){display:none!important}#axe-highlight{position:absolute;pointer-events:none;z-index:2147483647;display:flex;flex:1}#border{border-color:var(--theme--border-color,transparent)}#border,#margin{border-style:solid;display:flex;flex:1}#margin{border-color:var(--theme--margin-color,transparent)}#content{background-color:var(--theme--content-color,transparent);background-clip:content-box;border-color:var(--theme--padding-color,transparent);border-style:solid;width:100%;height:100%;box-sizing:border-box;display:flex;flex:1}\n    :host{--tooltip-background-color:#f9f9f9;--tooltip-border-color:#333;--tooltip-shadow-color:rgba(0,0,0,0.2);--tooltip-tag-name-color:#2e40a0;--tooltip-tag-identifier-color:#c53406;--tooltip-text-color:#02101a;--tooltip-label-color:#666;--tooltip-text-accent-color:#4d4d4d}#tooltip{position:absolute;white-space:nowrap;margin:.5rem 0;font-family:monospace;font-size:var(--base-font-size);padding:.6rem;background:var(--tooltip-background-color);color:var(--tooltip-text-color);box-shadow:0 0 6px var(--tooltip-shadow-color);border:3px solid var(--tooltip-border-color);z-index:2147483647;max-width:20rem;border-radius:3px}#tooltip p{margin:0}#tooltip svg{height:13px;width:13px;margin-bottom:-2px}#tooltip:after,#tooltip:before{content:"";display:block;position:absolute;border:.5rem solid transparent;border-top:none;border-bottom:.5rem solid var(--tooltip-background-color)}#tooltip:after{z-index:2;top:0;transform:translateY(1px) translateY(-100%)}#tooltip:before{top:0;transform:translateY(-3px) translateY(-100%);border-bottom:.5rem solid var(--tooltip-border-color);z-index:1}#tooltip.tooltip--top:before{top:100%;transform:rotate(180deg) translateY(-3px)}#tooltip.tooltip--top:after{top:100%;transform:rotate(180deg) translateY(1px)}#tooltip.tooltip--right{margin-right:-1.3rem}#tooltip.tooltip--right:after,#tooltip.tooltip--right:before{right:.6rem}#tooltip.tooltip--fullscreen{position:fixed!important;top:10px!important;left:10px!important;bottom:auto!important;transform:none;margin:0}#tooltip.tooltip--fullscreen:after,#tooltip.tooltip--fullscreen:before{display:none}#tag{display:grid;grid-template-columns:max-content auto 1fr min-content}#tag-name{color:var(--tooltip-tag-name-color)}#tag-identifier{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;white-space:normal;overflow:hidden;color:var(--tooltip-tag-identifier-color)}#tag-visibility{font-style:italic;color:var(--tooltip-text-accent-color);margin-left:1em}#tag-offscreen{margin-left:1em}#tag-dimensions{font-family:monospace;color:var(--tooltip-text-accent-color);margin-left:1em;justify-self:right}#hidden-eye{position:relative}#hidden-eye:before{position:absolute;content:"";display:block;height:1px;width:16px;background-color:#02101a;top:7px;left:-1px;z-index:1;transform:rotate(-45deg);border:1px solid #fff}#accessible-text{color:var(--tooltip-text-accent-color);white-space:normal}#attributes{display:grid;grid-template-columns:1fr auto;grid-column-gap:1rem;grid-row-gap:.2rem;grid-auto-rows:minmax(1.6em,auto);align-items:center;border-top:1px solid #ccc;padding:.6rem 0 0;margin:.6rem 0 0;font-family:sans-serif}#attributes dd,#attributes dl{margin:0}#attributes dt{color:var(--tooltip-label-color)}#attributes dd{justify-self:right;text-align:right;white-space:normal;-webkit-line-clamp:3;-webkit-box-orient:vertical}.contrast-aa{color:#4d4d4d;line-height:1em;display:inline-block;padding:2px;border:1px solid #4d4d4d;font-size:9px;vertical-align:text-bottom;font-family:monospace}\n  </style>\n  <style id="position"></style>\n  <div id="axe-highlight" class="theme--high-contrast">\n    <div id="margin">\n      <div id="border">\n        <div id="content"></div>\n      </div>\n    </div>\n  </div>\n  <div id="tooltip" style="display: none"></div>\n';const L="tooltip--top",T="tooltip--bottom",k="tooltip--left",E="tooltip--right",$="tooltip--fullscreen",z="highlight--fullpage",C="highlight--offscreen",R="highlight--hide",M=320,H=({top:t,right:e,bottom:o,left:i})=>`\n    border-top-width: ${Math.max(t,0)}px;\n    border-right-width: ${Math.max(e,0)}px;\n    border-bottom-width: ${Math.max(o,0)}px;\n    border-left-width: ${Math.max(i,0)}px;\n  `.replace(/[\s\n]/g,""),V="axe-highlighter";class B{static tagName="axe-highlighter";constructor(e){if(!e)return;const o=e.ownerDocument;let i;this.target=e,this.axeHighlighter=o.createElement(B.tagName);try{i=this.axeHighlighter.attachShadow({mode:"open"})}catch(t){i=this.axeHighlighter.shadowRoot}this.axeHighlighter.style.setProperty("--axe-highlight-counter",F.size+1),i.appendChild(y.content.cloneNode(!0)),this.position=i.getElementById("position"),this.highlight=i.getElementById("axe-highlight"),this.tooltip=i.getElementById("tooltip"),this.cachedLayout=t(e)}updatePosition(){const{width:e,height:o,margin:i,border:n,padding:r,hidden:a,offscreen:l,fullscreen:s}=this.cachedLayout=t(this.target);let{top:h,left:p}=this.cachedLayout;const{position:d}=this,{height:c,width:g,pageTop:m,pageLeft:f}=window.visualViewport||{width:window.innerWidth,height:window.innerHeight,pageTop:window.pageYOffset,pageLeft:window.pageXOffset},u=h+o/2>c/2+m,b=p>g-320+f,x=this.axeHighlighter.offsetParent;if(x&&"static"!==getComputedStyle(x).getPropertyValue("position")){const t=x.getBoundingClientRect();h-=t.top+m,p-=t.left+f}d.textContent=`\n      #axe-highlight {\n        top: ${h-Math.max(i.top,0)}px;\n        left: ${p-Math.max(i.left,0)}px;\n      }\n\n      #tooltip {\n        top: ${u?"auto":o+(h+Math.max(i.bottom,0))+"px"};\n        bottom: ${u?-(h-Math.max(i.top,0))+"px":"auto"};\n        left: ${b?"auto":p+"px"};\n        right: ${b?g-p+"px":"auto"};\n      }\n\n      #margin {\n        ${H(i)}\n        height: ${o}px;\n        width: ${e}px;\n      }\n\n      #border {\n        ${H(n)}\n      }\n\n      #content {\n        ${H(r)}\n      }\n    `;const w=l&&!s;this.highlight.classList.toggle(z,s),this.highlight.classList.toggle(C,w),this.showTooltip({offscreen:w,hidden:a,flipY:u,flipX:b})}setTheme(t){const{classList:e}=this.highlight;e.remove(...e),e.add("theme--"+t)}setOptions(t){this.options=t}showTooltip({hidden:t=!1,offscreen:e=!1,flipX:o=!1,flipY:i=!1}={}){const{target:n,tooltip:r,cachedLayout:a,options:l}=this,{showTooltip:s,showMetadata:h}=l;if(!s)return r.innerHTML="",void(r.style.display="none");const{height:p,width:d,fullscreen:c}=a,g=n.tagName.toLowerCase(),m=n.getAttribute("id"),f=Array.from(n.classList).join("."),u=m?"#"+m:f.length?"."+f:"";h&&!this.checks&&(this.checks=v(n));const b=this.checks&&Array.from(this.checks.entries()).map((([t,e])=>`<dt>${t}</dt><dd>${e}</dd>`));r.innerHTML=`\n      <div id="tag">\n        <strong id="tag-name">${g}</strong><span id="tag-identifier">${u}</span>\n        ${t?'<span id="tag-visibility">(hidden)</span>':""}\n        <span id="tag-dimensions">${parseFloat(d.toFixed(2))} x ${parseFloat(p.toFixed(2))}</span>\n      </div>\n      ${b&&b.length?`<dl id="attributes">${b.join("")}</d>`:""}\n    `,r.style.display="block",requestAnimationFrame((()=>{e?(this.tooltip.style.position="fixed",i?(this.tooltip.style.top="auto",this.tooltip.style.bottom="0"):this.tooltip.style.top="0"):(this.tooltip.style.position="",this.tooltip.style.top="",this.tooltip.style.bottom="");let t=T;i&&(t=L),t+=" "+(o?E:k),r.classList.toggle($,c),r.classList.remove(L,T,k,E),r.classList.add(...t.split(" "))}))}hide(){this.axeHighlighter.classList.add("highlight--hide")}show(){this.axeHighlighter.classList.remove("highlight--hide")}scrollIntoView(){this.target?.scrollIntoView({block:"center",behavior:"smooth",inline:"nearest"})}destroy(){this.axeHighlighter.parentNode?.removeChild(this.axeHighlighter),F.delete(this.target)}}const F=new Map;let A=!1,O=!1;function Y(){O||(window.requestAnimationFrame((()=>{F.forEach((t=>t.updatePosition())),O=!1})),O=!0)}function _(){Array.from(F.values()).forEach((t=>t.destroy()))}function D(){Array.from(F.values()).forEach((t=>t.show()))}function S(){Array.from(F.values()).forEach((t=>t.hide()))}function W(t){let e=null;return A||(window.addEventListener("resize",Y),window.addEventListener("scroll",Y,!0),window.addEventListener("beforeunload",(()=>{window.removeEventListener("resize",Y),window.removeEventListener("scroll",Y,!0)})),A=!0),{highlight:function({theme:o="high-contrast",showMetadata:i=!0,showTooltip:n=!0}={}){const r=F.get(t);return e=r||new B(t),e.setTheme(o),e.setOptions({showTooltip:n,showMetadata:i}),r||(F.set(t,e),document.body.appendChild(e.axeHighlighter)),e.updatePosition(),e},destroy:function(){e&&(e.destroy(),e=null)},scrollIntoView:()=>e?.scrollIntoView()}}export{M as TOOLTIP_MAX_WIDTH,_ as clearHighlights,W as createHighlighter,S as hideHighlights,R as highlightHidden,F as highlighters,D as showHighlights,V as tagName};
